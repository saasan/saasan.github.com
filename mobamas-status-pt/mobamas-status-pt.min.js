var mobamasStatusPt=angular.module("mobamasStatusPt",["ngStorage"]);mobamasStatusPt.config(["$interpolateProvider","$localStorageProvider",function(a,b){b.namespace("mobamasStatusPt."),a.startSymbol("[[").endSymbol("]]")}]),mobamasStatusPt.constant("defaultSettings",{level:100,stamina:83,attack:64,defence:63,unassignedPt:0,newStaminaPt:0,newAttackPt:0,newDefencePt:0}),mobamasStatusPt.controller("MainController",["$scope","$localStorage","defaultSettings",function(a,b,c){"use strict";a.$storage=b.$default(c);var d=function(a){return a>=60?50+Math.floor(a/3):a>=22?30+2*Math.floor((a-1)/3)+(a-1)%3:a>=16?23+a:10+2*(a-1)},e=function(a){return a>=60?30+Math.floor((a+2)/3):a>=22?12+2*Math.floor((a-2)/3)+(a-2)%3:a>=11?14+Math.floor(a/2)+a%2:9+a},f=function(a){return a>=60?30+Math.floor((a+1)/3):a>=22?10+2*Math.floor(a/3)+a%3:a>=11?14+Math.floor((a-1)/2)+(a-1)%2:9+a},g=function(){var b={level:1,stamina:10,attack:10,defence:10,unassignedPt:0,newStaminaPt:0,newAttackPt:0,newDefencePt:0};Object.keys(b).forEach(function(b){a.$storage[b]<this[b]&&(a.$storage[b]=this[b])},b),a.baseStamina=d(a.$storage.level),a.baseAttack=e(a.$storage.level),a.baseDefence=f(a.$storage.level);var c=a.$storage.stamina-a.baseStamina,g=a.$storage.attack-a.baseAttack,h=a.$storage.defence-a.baseDefence;a.totalPt=c+g+h+a.$storage.unassignedPt,a.newStamina=a.baseStamina+a.$storage.newStaminaPt,a.newAttack=a.baseAttack+a.$storage.newAttackPt,a.newDefence=a.baseDefence+a.$storage.newDefencePt,a.differencePt=a.totalPt-a.$storage.newStaminaPt-a.$storage.newAttackPt-a.$storage.newDefencePt};a.$watchCollection(function(){return[a.$storage.level,a.$storage.stamina,a.$storage.attack,a.$storage.defence,a.$storage.unassignedPt,a.$storage.newStaminaPt,a.$storage.newAttackPt,a.$storage.newDefencePt]},function(){a.calcStatusPt.$valid&&g()})}]);